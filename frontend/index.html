<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phishing Email Detection Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">
                <i class="bi bi-shield-check"></i> Phishing Email Detection System
            </span>
        </div>
    </nav>

    <div class="container-fluid mt-4">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-2 sidebar">
                <div class="list-group">
                    <a href="#" class="list-group-item list-group-item-action active" onclick="showSection('dashboard')">
                        <i class="bi bi-speedometer2"></i> Dashboard
                    </a>
                    <a href="#" class="list-group-item list-group-item-action" onclick="showSection('upload')">
                        <i class="bi bi-cloud-upload"></i> Upload Email
                    </a>
                    <a href="#" class="list-group-item list-group-item-action" onclick="showSection('emails')">
                        <i class="bi bi-envelope"></i> Emails
                    </a>
                    <a href="#" class="list-group-item list-group-item-action" onclick="showSection('iocs')">
                        <i class="bi bi-bug"></i> IOCs
                    </a>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-10">
                <!-- Dashboard Section -->
                <div id="dashboard-section" class="content-section">
                    <h2 class="mb-4">Dashboard</h2>

                    <!-- Summary Cards -->
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="card text-white bg-primary">
                                <div class="card-body">
                                    <h5 class="card-title">Total Emails</h5>
                                    <h2 id="total-emails">0</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-white bg-danger">
                                <div class="card-body">
                                    <h5 class="card-title">Phishing Detected</h5>
                                    <h2 id="phishing-count">0</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-white bg-success">
                                <div class="card-body">
                                    <h5 class="card-title">Total IOCs</h5>
                                    <h2 id="total-iocs">0</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-white bg-info">
                                <div class="card-body">
                                    <h5 class="card-title">Legitimate Emails</h5>
                                    <h2 id="legitimate-count">0</h2>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts -->
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5>IOC Type Distribution</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="ioc-chart"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5>Emails Analyzed (Last 30 Days)</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="timeline-chart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Upload Section -->
                <div id="upload-section" class="content-section" style="display: none;">
                    <h2 class="mb-4">Upload Email</h2>
                    <div class="card">
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="emailFile" class="form-label">Select Email File (.eml or .txt)</label>
                                <input class="form-control" type="file" id="emailFile" accept=".eml,.txt">
                            </div>
                            <button class="btn btn-primary" onclick="uploadEmail()">
                                <i class="bi bi-upload"></i> Upload and Analyze
                            </button>
                            <div id="upload-progress" class="mt-3" style="display: none;">
                                <div class="progress">
                                    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%"></div>
                                </div>
                            </div>
                            <div id="upload-result" class="mt-3"></div>
                        </div>
                    </div>
                </div>

                <!-- Emails Section -->
                <div id="emails-section" class="content-section" style="display: none;">
                    <h2 class="mb-4">Email List</h2>
                    <div class="card">
                        <div class="card-body">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Filename</th>
                                        <th>Sender</th>
                                        <th>Subject</th>
                                        <th>Upload Date</th>
                                        <th>Status</th>
                                        <th>IOCs</th>
                                    </tr>
                                </thead>
                                <tbody id="emails-table-body">
                                    <tr>
                                        <td colspan="7" class="text-center">Loading...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- IOCs Section -->
                <div id="iocs-section" class="content-section" style="display: none;">
                    <h2 class="mb-4">Indicators of Compromise (IOCs)</h2>

                    <!-- Filters -->
                    <div class="card mb-3">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <label for="ioc-type-filter" class="form-label">IOC Type</label>
                                    <select class="form-select" id="ioc-type-filter" onchange="loadIOCs()">
                                        <option value="">All Types</option>
                                        <option value="ipv4">IPv4 Address</option>
                                        <option value="url">URL</option>
                                        <option value="email">Email Address</option>
                                        <option value="domain">Domain</option>
                                        <option value="md5">MD5 Hash</option>
                                        <option value="sha1">SHA1 Hash</option>
                                        <option value="sha256">SHA256 Hash</option>
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <label for="ioc-search" class="form-label">Search</label>
                                    <input type="text" class="form-control" id="ioc-search" placeholder="Search IOC value...">
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">&nbsp;</label>
                                    <button class="btn btn-primary d-block w-100" onclick="loadIOCs()">
                                        <i class="bi bi-search"></i> Search
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- IOCs Table -->
                    <div class="card">
                        <div class="card-body">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Type</th>
                                        <th>Value</th>
                                        <th>Severity</th>
                                        <th>Detection Date</th>
                                        <th>Email ID</th>
                                    </tr>
                                </thead>
                                <tbody id="iocs-table-body">
                                    <tr>
                                        <td colspan="5" class="text-center">Loading...</td>
                                    </tr>
                                </tbody>
                            </table>
                            <nav>
                                <ul class="pagination" id="ioc-pagination">
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
</body>
</html>
